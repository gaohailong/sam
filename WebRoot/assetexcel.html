
<div class="row-fluid">
	<div class="span12">
		<!-- BEGIN PAGE TITLE & BREADCRUMB-->
		<h3 class="page-title">璧勪骇鎶ヨ〃</h3>
		<ul class="breadcrumb">
			<li><i class="icon-home"></i> <a href="index.html">棣栭〉</a> <i
				class="icon-angle-right"></i></li>
			<li><a href="#">鎶ヨ〃瀵煎嚭</a> <i class="icon-angle-right"></i></li>
			<li><a href="#">璧勪骇鏄庣粏鎶ヨ〃</a></li>
		</ul>
		<!-- END PAGE TITLE & BREADCRUMB-->
	</div>

</div>

<!-- END PAGE HEADER-->

<!-- BEGIN PAGE CONTENT-->
<div class="row-fluid">
	<div class="span12">

		<!-- BEGIN SAMPLE TABLE PORTLET-->

		<div class="portlet box red">
			<div class="portlet-title">
				<div class="caption">
					<i class="icon-cogs"></i>鏌ヨ
				</div>
				<div class="actions">
					<button onclick="findAssetInfoBytiaojian(1)" href="#" data-toggle="modal" class="btn green ">
						<i class="icon-search"></i>鏌ヨ
					</button>
				</div>
			</div>

			<div class="portlet-body">
				<!-- BEGIN FORM-->

				<form action="#" class="form-horizontal">
					<div class="row-fluid">
						<div class="control-group">
							<label class="control-label span2">璧勪骇鍚嶇О</label>
							<div class="controls span2">
								<input id="assetInfoName" type="text" placeholder="璁惧鍚嶇О" class="m-wrap medium" />
							</div>
							<label class="control-label span3">绫诲瀷鍚嶇О</label>

							<div class="controls span2">

								<select class="medium m-wrap" tabindex="1" id="assetType">
									<option value="">璇烽�鎷�/option>
								</select>

							</div>

						</div>
						<div class="row-fluid">
							<div class="control-group">
								<label class="control-label span2">浠撳簱鍚嶇О</label>
								<div class="controls span2">
									<select class="medium m-wrap" tabindex="1" id="selectwareHouse">
										<option value="">璇烽�鎷�/option>
									</select>
								</div>
								<!-- 
								<label class="control-label span3">杩涘簱鏃堕棿</label>

								<div class="controls span2">
									<div class="input-append date date-picker m-wrap medium"
										data-date="2016/12/02" data-date-format="yyyy/mm/dd"
										data-date-viewmode="years">

										<input class="m-wrap m-ctrl-medium date-picker" readonly
											size="16" type="text" value="" /> <span class="add-on"><i
											class="icon-calendar"></i></span>
									</div>
								</div>
								 -->
							</div>
						</div>
					</div>
				</form>
				<!-- END FORM-->
			</div>

		</div>
		<!-- END SAMPLE TABLE PORTLET-->
	</div>


</div>

<div class="row-fluid">

	<div class="span12">

		<!-- BEGIN SAMPLE TABLE PORTLET-->

		<div class="portlet box red">

			<div class="portlet-title">

				<div class="caption">
					<i class="icon-cogs"></i>璧勪骇鍒楄〃
				</div>
				<div class="actions">
				 	<a href="#exportassetinfoexcel"
						data-toggle="modal" class="btn green "><i class="icon-check"></i>
						瀵煎嚭EXCEL</a>
				</div>
				
			</div>

			<div class="portlet-body">

				<table class="table table-hover">

					<thead>

						<tr>

							<th>璧勪骇缂栧彿</th>
							<th>璧勪骇鍚嶇О</th>
							<th>璧勪骇鍨嬪彿</th>
							<th class="hidden-480">璧勪骇绫诲瀷</th>
							<th>璧勪骇鐘跺喌</th>
							<th>鎵�湪浠撳簱</th>
							<th>璧勪骇鎵�睘閮ㄩ棬</th>
							<th>鍏ュ簱鏃堕棿</th>
							<th>鐢熶骇鏃ユ湡</th>
							<th>鐢熶骇鍗曚綅</th>
							<th>璁惧浠峰�</th>
							<th>淇濊川鏈�/th>
							<th>璁惧澶囨敞</th>
							<th>鎶樻棫鏂规硶</th>
							<th>娈嬪�鐜�/th>
							
						</tr>

					</thead>

					<tbody id="assetTbody">
	<!-- 
						<tr>

							<td>1</td>

							<td>Mark</td>

							<td>Otto</td>

							<td class="hidden-480">makr124</td>

							<td><span class="label label-success">Approved</span></td>

						</tr>

						<tr>

							<td>2</td>

							<td>Jacob</td>

							<td>Nilson</td>

							<td class="hidden-480">jac123</td>

							<td><span class="label label-info">Pending</span></td>

						</tr>

						<tr>

							<td>3</td>

							<td>Larry</td>

							<td>Cooper</td>

							<td class="hidden-480">lar</td>

							<td><span class="label label-warning">Suspended</span></td>

						</tr>

						<tr>

							<td>3</td>

							<td>Sandy</td>

							<td>Lim</td>

							<td class="hidden-480">sanlim</td>

							<td><span class="label label-danger">Blocked</span></td>

						</tr>
 -->
					</tbody>

				</table>

			</div>

		</div>
		 <center>
                   <!--  data-toggle="modal" -->
                   	<a id="firstPage" href="javascript:initAllAssetInfo(1);" class="btn red ">棣栭〉</a>  |
                   	<a id="perPage" href="" data-toggle="modal" class="btn red ">涓婁竴椤�/a> |
                   	<a id="nextPage" href="" data-toggle="modal" class="btn red ">涓嬩竴椤�/a> |
                   	<a id="lastPage" href="" data-toggle="modal" class="btn red ">灏鹃〉</a> |
                   	绗�span id="currentPage"></span>椤�| 
                   	鍏�span id="totalRecord"></span>鏉℃暟鎹�
                   
                   </center>
                   <br> <br> <br>
             <div id="exportassetinfoexcel" class="modal hide fade" tabindex="-1"
				data-width="760">
				<form action="/sam/infoController/exportAssetInfoExcel" method="post" onsubmit="return exportassetinfoexcel()">
				
				<input type="hidden" id="ainameexcel" name="ainame" value="">
				<input type="hidden" id="assettypeexcel" name="atname" value="">
				<input type="hidden" id="assethouseexcel" name="ahname" value="">
				
					<div class="modal-header">
						<span class="hidden-480">璇烽�鎷╄瀵煎嚭鐨勫垪</span>
					</div>
					<div class="modal-body">
						<div class="portlet-body form">
							<div class="tabbable portlet-tabs">
								<div class="tab-content">
									<div class="tab-pane active" id="portlet_tab1">
										<!-- BEGIN FORM-->
										
										<div class="form-horizontal">
											<div class="control-group">
												<div class="control-group"></div>
												<div class="control-group"></div>
												<div class="control-group"></div>
												
												
												<label class="control-label">
													<input type="hidden" value="璧勪骇缂栧彿#aicard" name="exportassetinfo" checked="checked">
													<input type="checkbox" value="璧勪骇缂栧彿#aicard" name="exportassetinfo" checked="checked" disabled="disabled">璧勪骇缂栧彿(蹇呴�)
											    </label>     
												<label class="control-label">
													<input type="checkbox" value="璧勪骇鍚嶇О#ainame" name="exportassetinfo" checked="checked">璧勪骇鍚嶇О
											    </label>     
												<label class="control-label">
													<input type="checkbox" value="璧勪骇鍨嬪彿#aimodel" name="exportassetinfo" checked="checked">璧勪骇鍨嬪彿
											    </label>     
												<label class="control-label">
													<input type="checkbox" value="璧勪骇绫诲瀷#atname" name="exportassetinfo" checked="checked">璧勪骇绫诲瀷
											    </label>     
												     
											</div>
											<div class="control-group">
												<label class="control-label">
													<input type="checkbox" value="璧勪骇鐘跺喌#asname" name="exportassetinfo" checked="checked">璧勪骇鐘跺喌
											    </label>     
												<label class="control-label">
													<input type="checkbox" value="鎵�湪浠撳簱#ahname" name="exportassetinfo" checked="checked">鎵�湪浠撳簱
											    </label>     
												<label class="control-label">
													<input type="checkbox" value="璧勪骇鎵�睘閮ㄩ棬#adname" name="exportassetinfo" checked="checked">璧勪骇鎵�睘閮ㄩ棬
											    </label>     
												<label class="control-label">
													<input type="checkbox" value="鍏ュ簱鏃堕棿#aidate" name="exportassetinfo" checked="checked">鍏ュ簱鏃堕棿
											    </label>     
											</div>
											<div class="control-group">
												<label class="control-label">
													<input type="checkbox" value="鐢熶骇鏃ユ湡#aimeasuer" name="exportassetinfo" checked="checked">鐢熶骇鏃ユ湡
											    </label>     
												<label class="control-label">
													<input type="checkbox" value="鐢熶骇鍗曚綅#aisupply" name="exportassetinfo" checked="checked">鐢熶骇鍗曚綅
											    </label>     
												<label class="control-label">
													<input type="checkbox" value="璁惧浠峰�#aimoney" name="exportassetinfo" checked="checked">璁惧浠峰�
											    </label>     
												<label class="control-label">
													<input type="checkbox" value="淇濊川鏈�ailife" name="exportassetinfo" checked="checked">淇濊川鏈�
											    </label>     
											</div>
											<div class="control-group">
												<label class="control-label">
													<input type="checkbox" value="璁惧澶囨敞#airemark" name="exportassetinfo" checked="checked">璁惧澶囨敞
											    </label>     
												<label class="control-label">
													<input type="checkbox" value="鎶樻棫鏂规硶#aidepreciation" name="exportassetinfo" checked="checked">鎶樻棫鏂规硶
											    </label>     
												<label class="control-label">
													<input type="checkbox" value="娈嬪�鐜�airemainratio" name="exportassetinfo" checked="checked">娈嬪�鐜�
											    </label>     
												   
											</div>
										
											
										</div>
										
										<!-- END FORM-->
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button id="accept-tbody-close" type="button" data-dismiss="modal"
							class="btn">鍏抽棴</button>
						<input type="submit" class="btn blue" value="纭骞跺鍑�>">
					</div>
				</form>
			</div>
		
		<!-- END SAMPLE TABLE PORTLET-->
	</div>
</div>



<script>
	jQuery(document).ready(function() {

		
		selectAssetType();
		selectWareHouse1();
		selectAllSecondAssetType();
		initAllAssetInfo(1);
	});
	
	
	function initDepartment() {
		$.ajax({
					type : "GET",
					url : "/sam/department/findDepartmentsFirst",
					dataType : "JSON",
					success : function(data) {
						$(data)
								.each(
										function(index, value) {
											$("#item_department")
													.append(
															"<li><a href='#'>"
																	+ value.adname
																	+ "<span class='arrow'></span></a><ul id='second_department_" + value.adid + "' class='sub-menu'></ul></li>");
											initSecondDepartment(value.adid);
										});
					},
					error : function(data) {
						alert(data.status);
					}

				});
	}
	//閬嶅巻浜岀骇閮ㄩ棬鐨勬柟娉�
	function initSecondDepartment(adlevel) {
		$.ajax({
			type : "post",
			url : "/sam/department/findDepartmentsSecond",
			data : "adlevel=" + adlevel,
			dataType : "HTML",
			success : function(data) {
				$(data).each(
						function(index, val) {
							$("#second_department_" + adlevel).append(
									"<li><a href='#'>" + val.adname
											+ "</a></li>");
						});
			},
			error : function(data) {
				alert(data.status);
			}
		});
	}

	function selectAssetType() {
		$.ajax({
			type : "get",
			url : "/sam/assetType/findAllAssetType",
			dataType : "JSON",
			success : function(data) {
				$(data).each(
						function(index, val) {
							$("#assetType").append(
									"<option value='"+val.atname+"'>"
											+ val.atname + "</option>");
						});

			},
			error : function(data) {
				alert(data.status);
			}
		});
	}
	//閬嶅巻鍏ㄩ儴浠撳簱
	function selectWareHouse1() {
		$.ajax({
			type : "get",
			url : "/sam/wareHouse/findAllSecondAssetHouse",
			dataType : "JSON",
			success : function(data) {
			$("#selectwareHouse").html("");
			$("#selectwareHouse").append('<option value="">璇烽�鎷�/option>');
				$(data).each(
						function(index, value) {
							$("#selectwareHouse").append(
								"<option value='"+value.ahname+"'>"+value.ahname+"</option>"
							);
						});

			},
			error : function(data) {
				alert(data.status);
			}
		});
	
		
	}
	
	//閬嶅巻鍏ㄩ儴浜岀骇绫诲瀷
	function selectAllSecondAssetType() {
		$.ajax({
			type : "get",
			url : "/sam/assetType/findAllSecondAssetType",
			dataType : "JSON",
			success : function(data) {
			$("#assetType").html("");
			$("#assetType").append('<option value="">璇烽�鎷�/option>');
				$(data).each(
						function(index, value) {
							$("#assetType").append(
								"<option value='"+value.atname+"'>"+value.atname+"</option>"
							);
						});

			},
			error : function(data) {
				alert(data.status);
			}
		});
	
		
	}
	
	
	//鍒濆鍖栧叏閮ㄨ澶囩殑鍒嗛〉淇℃伅
	function initAllAssetInfo(page) {
			$.ajax({
				type : "GET",
				url : "/sam/infoController/findAssetInfos",
				data : "page="+page,
				dataType : "JSON",
				success : function(data) { 
				
					//鎬婚〉鏁�
					var totalPage = data.totalPage;
					
					//褰撳墠椤电爜
					var currentPage = data.currentPage;
					$("#currentPage").html(currentPage);
					
					var perPagenum;
					perPagenum = page-1;
					if(perPagenum < 1) {
						perPagenum = 1;
					}
					$("#perPage").attr("href","javascript:initAllAssetInfo("+perPagenum+");"); 
					var lastpagenum;
					nextPage = page+1;
					if(nextPage > totalPage) {
						nextPage = totalPage;
					}
					$("#nextPage").attr("href","javascript:initAllAssetInfo("+nextPage+");");
					$("#lastPage").attr("href","javascript:initAllAssetInfo("+totalPage+");");
					
					//鎬绘潯鐩暟
					var totalRecord = data.totalRecord;
					$("#totalRecord").html(totalRecord);
					
										
					var assetInfoList = data.dataList;
					$("#assetTbody").html("");
					for(var i = 0;i < assetInfoList.length;i++) {
						$("#assetTbody").append(
							"<tr>"
							+"<td>"+assetInfoList[i].aicard+"</td>"
							+"<td>"+assetInfoList[i].ainame+"</td>"
							+"<td>"+assetInfoList[i].aimodel+"</td>"
							+"<td>"+assetInfoList[i].atname+"</td>"
							+"<td>"+assetInfoList[i].asname+"</td>"
							+"<td>"+assetInfoList[i].ahname+"</td>"
							+"<td>"+assetInfoList[i].adname+"</td>"
							+"<td>"+assetInfoList[i].aidate+"</td>"
							+"<td>"+assetInfoList[i].aimeasuer+"</td>"
							+"<td>"+assetInfoList[i].aisupply+"</td>"
							+"<td>"+assetInfoList[i].aimoney+"</td>"
							+"<td>"+assetInfoList[i].ailife+"</td>"
							+"<td>"+assetInfoList[i].airemark+"</td>"
							+"<td>"+assetInfoList[i].aidepreciation+"</td>"
							+"<td>"+assetInfoList[i].airemainratio+"</td>"
							+"</tr>"
						);
					}
				},
				error : function() {
				alert("鍑洪敊浜�);
				}
			});
	}
	
	//鏉′欢鏌ヨ
	function findAssetInfoBytiaojian(page) {
		var assetInfoName = $("#assetInfoName").val();
		var assetType = $("#assetType").val();
		var selectwareHouse = $("#selectwareHouse").val();
		
		
		var tiaojian = {
			"ainame":assetInfoName,
			"atname":assetType,
			"ahname":selectwareHouse,
			"pageNum":page
		};
		$.ajax({
			type:"post",
			url:"/sam/infoController/findAssetByCondition",
			data:tiaojian,
			dataType:"JSON",
			success:function(data) {
				//鎬婚〉鏁�
					var totalPage = data.totalPage;
					
					//褰撳墠椤电爜
					var currentPage = data.currentPage;
					$("#currentPage").html("");
					$("#currentPage").html(currentPage);
					
					var perPagenum;
					perPagenum = page-1;
					if(perPagenum < 1) {
						perPagenum = 1;
					}
					$("#perPage").attr("href","javascript:findAssetInfoBytiaojian("+perPagenum+");"); 
					var lastpagenum;
					nextPage = page+1;
					if(nextPage > totalPage) {
						nextPage = totalPage;
					}
					$("#nextPage").attr("href","javascript:findAssetInfoBytiaojian("+nextPage+");");
					$("#lastPage").attr("href","javascript:findAssetInfoBytiaojian("+totalPage+");");
					
					//鎬绘潯鐩暟
					var totalRecord = data.totalRecord;
					$("#totalRecord").html("");
					$("#totalRecord").html(totalRecord);
					
										
					var assetInfoList = data.dataList;
					$("#assetTbody").html("");
					for(var i = 0;i < assetInfoList.length;i++) {
						$("#assetTbody").append(
							"<tr>"
							+"<td>"+assetInfoList[i].aicard+"</td>"
							+"<td>"+assetInfoList[i].ainame+"</td>"
							+"<td>"+assetInfoList[i].aimodel+"</td>"
							+"<td>"+assetInfoList[i].atname+"</td>"
							+"<td>"+assetInfoList[i].asname+"</td>"
							+"<td>"+assetInfoList[i].ahname+"</td>"
							+"<td>"+assetInfoList[i].adname+"</td>"
							+"<td>"+assetInfoList[i].aidate+"</td>"
							+"<td>"+assetInfoList[i].aimeasuer+"</td>"
							+"<td>"+assetInfoList[i].aisupply+"</td>"
							+"<td>"+assetInfoList[i].aimoney+"</td>"
							+"<td>"+assetInfoList[i].ailife+"</td>"
							+"<td>"+assetInfoList[i].airemark+"</td>"
							+"<td>"+assetInfoList[i].aidepreciation+"</td>"
							+"<td>"+assetInfoList[i].airemainratio+"</td>"
							+"</tr>"
						);
					}
			},
			error:function(data) {
				alert("鍑洪敊浜�+data.status);
			}
		});
	}
	
	//鎻愪氦瀵煎嚭excel
	function exportassetinfoexcel() {
		alert("sdfsd");
		
		var assetInfoName = $("#assetInfoName").val();
		var assetType = $("#assetType").val();
		var selectwareHouse = $("#selectwareHouse").val();
		
		alert("assetType:"+assetType);
		alert("assetInfoName:"+assetInfoName);
		alert("selectwareHouse:"+selectwareHouse);
		
		
		$("#ainameexcel").attr("value",assetInfoName);
		$("#assettypeexcel").attr("value",assetType);
		$("#assethouseexcel").attr("value",selectwareHouse);
		
		$("#accept-tbody-close").click();
		
		return true;
	}
		
</script>

<!-- END JAVASCRIPTS -->
