
<div class="row-fluid">
	<div class="span12">
		<!-- BEGIN PAGE TITLE & BREADCRUMB-->
		<h3 class="page-title">绯荤粺绠＄悊</h3>
		<ul class="breadcrumb">

			<li><i class="icon-home"></i> <a href="index.html">棣栭〉</a> <span
				class="icon-angle-right"></span></li>

			<li><a href="#">绯荤粺绠＄悊</a> <span class="icon-angle-right"></span>

			</li>

			<li><a href="#">浠撳簱绠＄悊</a></li>

		</ul>
		<!-- END PAGE TITLE & BREADCRUMB-->
	</div>

</div>

<!-- END PAGE HEADER-->

<!-- BEGIN PAGE CONTENT-->
<div class="row-fluid">
	<div class="span12">

		<!-- BEGIN SAMPLE TABLE PORTLET-->

		<div class="portlet box red ">
			<div class="portlet-title">
				<div class="caption">
					<i class="icon-cogs"></i>浠撳簱鍒楄〃
				</div>
				<div class="actions">
				 
					<a href="#exporthouseexcel" data-toggle="modal" class="btn green ">
						<i class="icon-search"></i>瀵煎嚭EXCEL
					</a>
				</div>
			</div>

			<div class="portlet-body">

				<table class="table table-hover">

					<thead>

						<th>浠撳簱鍚嶇О</th>

						<th>绠＄悊浜哄憳鍚嶇О</th>

						<th>澶囨敞</th>

					</thead>

					<tbody id="assetTbody">

						
						<a href="#updateresponsive" data-toggle="modal" class="hide"
							id="updatenbsp">&nbsp;</a>
					</tbody>

				</table>

			</div>

			

		</div>
		<!-- END SAMPLE TABLE PORTLET-->
	</div>


</div>

<div class="row-fluid">

	<div class="span12">

		<!-- BEGIN SAMPLE TABLE PORTLET-->
		<center>
			<a href="javascript:initAllAssetHouse(1);" data-toggle="modal"
				class="btn red ">棣栭〉</a> | <a id="perPage" href=""
				data-toggle="modal" class="btn red ">涓婁竴椤�/a> | <a id="nextPage"
				href="" data-toggle="modal" class="btn red ">涓嬩竴椤�/a> | <a
				id="las tPage" href="" data-toggle="modal" class="btn red ">灏鹃〉</a> |
			绗�span id="currentPage"></span>椤�| 鍏�span id="totalRecord"></span>鏉℃暟鎹�
		</center>
			
			<!-- 闅愯棌鐨別xceldiv -->
			 <div id="exporthouseexcel" class="modal hide fade" tabindex="-1"
				data-width="760">
				<form action="/sam/wareHouse/exportHouseExcel" method="post" onsubmit="return submitExcelForm();">
				
				<input type="hidden" id="ainameexcel" name="ainame" value="">
				<input type="hidden" id="assettypeexcel" name="atname" value="">
				<input type="hidden" id="assethouseexcel" name="ahname" value="">
				
					<div class="modal-header">
						<span class="hidden-480">璇烽�鎷╄瀵煎嚭鐨勫垪</span>
					</div>
					<div class="modal-body">
						<div class="portlet-body form">
							<div class="tabbable portlet-tabs">
								<div class="tab-content">
									<div class="tab-pane active" id="portlet_tab1">
										<!-- BEGIN FORM-->
										
										<div class="form-horizontal">
											<div class="control-group">
												<div class="control-group"></div>
												<div class="control-group"></div>
												<div class="control-group"></div>
												
												
												<label class="control-label">
													<input type="hidden" value="浠撳簱鍚嶇О#ahname" name="exporthouse" checked="checked">
													<input type="checkbox" value="浠撳簱鍚嶇О#ahname" name="exporthouse" checked="checked" disabled="disabled">浠撳簱鍚嶇О(蹇呴�)
											    </label>     
												<label class="control-label">
													<input type="hidden" value="绠＄悊浜哄憳鍚嶇О#auname" name="exporthouse" checked="checked">
													<input type="checkbox" value="绠＄悊浜哄憳鍚嶇О#auname" name="exporthouse" checked="checked" disabled="disabled">绠＄悊浜哄憳鍚嶇О(蹇呭～)
											    </label>     
												<label class="control-label">
													<input type="checkbox" value="澶囨敞#ahbeizhu" name="exporthouse" checked="checked">澶囨敞
											    </label>     
												     
											</div>
										</div>
										
										<!-- END FORM-->
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button id="accept-tbody-close" type="button" data-dismiss="modal"
							class="btn">鍏抽棴</button>
						<input type="submit" class="btn blue" value="纭骞跺鍑�>">
					</div>
				</form>
			</div>
			<!-- 闅愯棌鐨別xceldiv缁撴潫 -->
			
		<!-- END SAMPLE TABLE PORTLET-->
	</div>
</div>
<script>
	jQuery(document).ready(function() {
		initDepartment();
		initAllAssetHouse(1);
	});
	function initDepartment() {

		$
				.ajax({
					type : "GET",
					url : "/sam/department/findDepartmentsFirst",
					dataType : "JSON",
					success : function(data) {
						$(data)
								.each(
										function(index, value) {
											$("#item_department")
													.append(
															"<li><a href='#'>"
																	+ value.adname
																	+ "<span class='arrow'></span></a><ul id='second_department_" + value.adid + "' class='sub-menu'></ul></li>");
											initSecondDepartment(value.adid);
										});
					},
					errot : function(data) {
						alert(data.status);
					}

				});
	}
	//閬嶅巻浜岀骇閮ㄩ棬鐨勬柟娉�
	function initSecondDepartment(adlevel) {
		$.ajax({
			type : "post",
			url : "/sam/department/findDepartmentsSecond",
			data : "adlevel=" + adlevel,
			dataType : "JSON",
			success : function(data) {
				$(data).each(
						function(index, val) {
							$("#second_department_" + adlevel).append(
									"<li><a href='#'>" + val.adname
											+ "</a></li>");
						});
			},
			error : function(data) {
				alert(data.status);
			}
		});
	}

	function addHouse() {
		alert("杩涘叆娉ㄥ唽鐨勯〉闈�);
		$.ajax({
			type : "post",
			url : "/sam/wareHouse/addHouse",
			data : $('#houseform').serialize(),
			dataType : "JSON",
			success : function(data) {
				if (data > 0)
					alert("娣诲姞鎴愬姛");
			},
			error : function(data) {
				alert("娣诲姞閿欒");
			}
		});
	}

	//鍒濆鍖栧叏閮ㄨ澶囩殑鍒嗛〉淇℃伅
	function initAllAssetHouse(page) {
		
				$.ajax({
					type : "GET",
					url : "/sam/wareHouse/findHouse",
					data : "page=" + page,
					dataType : "JSON",
					success : function(data) {

						//鎬婚〉鏁�
						var totalPage = data.totalPage;

						//褰撳墠椤电爜
						var currentPage = data.currentPage;
						$("#currentPage").html(currentPage);

						var perPagenum;
						perPagenum = page - 1;
						if (perPagenum < 1) {
							perPagenum = 1;
						}
						$("#perPage").attr(
								"href",
								"javascript:initAllAssetHouse(" + perPagenum
										+ ");");
						var lastpagenum;
						nextPage = page + 1;
						if (nextPage > totalPage) {
							nextPage = totalPage;
						}
						$("#nextPage").attr(
								"href",
								"javascript:initAllAssetHouse(" + nextPage
										+ ");");
						$("#lastPage").attr(
								"href",
								"javascript:initAllAssetHouse(" + totalPage
										+ ");");

						//鎬绘潯鐩暟
						var totalRecord = data.totalRecord;
						$("#totalRecord").html(totalRecord);

						var assetHouseList = data.dataList;
						$("#assetTbody").html("");
						for (var i = 0; i < assetHouseList.length; i++) {
							$("#assetTbody")
									.append(
											"<tr>"
													+ "<td>"
													+ assetHouseList[i].ahname
													+ "</td>"
													+ "<td>"
													+ assetHouseList[i].auname
													+ "</td>"
													+ "<td>"
													+ assetHouseList[i].ahbeizhu
													+ "</td>"
													+ "</tr>");
						}
					},
					error : function(data) {
						alert("鍑洪敊浜� + data.status);
					}
				});
	}
	
	
	function submitExcelForm() {
		$("#accept-tbody-close").click();
		return true;
	}

</script>
